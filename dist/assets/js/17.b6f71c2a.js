(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{421:function(a,s,e){"use strict";e.r(s);var t=e(0),n=Object(t.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("ROS创建软件包")])]),a._v(" "),s("h2",{attrs:{id:"_1-一个catkin软件包的组成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-一个catkin软件包的组成"}},[a._v("#")]),a._v(" 1.一个catkin软件包的组成")]),a._v(" "),s("p",[a._v("一个包要想称为catkin软件包，必须符合以下要求：")]),a._v(" "),s("ul",[s("li",[a._v("这个包必须有一个符合catkin规范的"),s("a",{attrs:{href:"https://wiki.ros.org/catkin/package.xml",target:"_blank",rel:"noopener noreferrer"}},[a._v("package.xml"),s("OutboundLink")],1),a._v("文件\n"),s("ul",[s("li",[a._v("这个"),s("code",[a._v("package.xml")]),a._v("文件提供有关该软件包的元信息")])])]),a._v(" "),s("li",[a._v("这个包必须有一个"),s("a",{attrs:{href:"https://wiki.ros.org/catkin/CMakeLists.txt",target:"_blank",rel:"noopener noreferrer"}},[a._v("catkin版本的CMakeLists.txt"),s("OutboundLink")],1),a._v("文件\n"),s("ul",[s("li",[a._v("如果它是个"),s("a",{attrs:{href:"https://wiki.ros.org/catkin/package.xml#Metapackages",target:"_blank",rel:"noopener noreferrer"}},[a._v("Catkin元包"),s("OutboundLink")],1),a._v("的话，则需要有一个"),s("code",[a._v("CMakeList.txt")]),a._v("文件的相关样板")])])]),a._v(" "),s("li",[a._v("每个包必须有自己的目录\n"),s("ul",[s("li",[a._v("这意味着在同一个目录下不能有嵌套的或者多个软件包存在")])])])]),a._v(" "),s("p",[a._v("最简单的软件包看起来就像这样：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("my_package/\n  CMakeLists.txt\n  package.xml\n")])])]),s("h2",{attrs:{id:"_2-catkin工作空间中的软件包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-catkin工作空间中的软件包"}},[a._v("#")]),a._v(" 2.catkin工作空间中的软件包")]),a._v(" "),s("p",[a._v("开发catkin软件包的推荐方法是使用"),s("a",{attrs:{href:"https://wiki.ros.org/catkin/workspaces",target:"_blank",rel:"noopener noreferrer"}},[a._v("catkin工作空间"),s("OutboundLink")],1),a._v("，但是你也可以单独开发catkin软件包。一个简单的工作空间如下所示：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("workspace_folder/        -- WORKSPACE\n  src/                   -- SOURCE SPACE\n    CMakeLists.txt       -- "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Toplevel'")]),a._v(" CMake file, provided by catkin\n    package_1/\n      CMakeLists.txt     -- CMakeLists.txt "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" package_1\n      package.xml        -- Package manifest "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" package_1\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n    package_n/\n      CMakeLists.txt     -- CMakeLists.txt "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" package_n\n      package.xml        -- Package manifest "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" package_n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#💖各种软件包需要放在src目录下")]),a._v("\n")])])]),s("h2",{attrs:{id:"_3-创建catkin软件包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-创建catkin软件包"}},[a._v("#")]),a._v(" 3.创建catkin软件包")]),a._v(" "),s("p",[a._v("首先切换到刚才创建的空白catkin工作空间中的源文件空间目录：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# You should have created this in the Creating a Workspace Tutorial")]),a._v("\n$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" ~/catkin_ws/src\n")])])]),s("p",[a._v("现在使用"),s("code",[a._v("catkin_create_pkg")]),a._v("命令创建一个名为"),s("code",[a._v("beginner_tutorials")]),a._v("的新软件包，这个软件包依赖于"),s("code",[a._v("std_msgs")]),a._v("、"),s("code",[a._v("roscpp")]),a._v("和"),s("code",[a._v("rospy")]),a._v("：")]),a._v(" "),s("p",[s("code",[a._v("catkin_create_pkg")]),a._v("命令会要求你输入"),s("code",[a._v("package_name")]),a._v("，如有需要还可以在后面添加一些需要依赖的其它软件包：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# This is an example, do not try to run this")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# catkin_create_pkg <package_name> [depend1] [depend2] [depend3]")]),a._v("\ncatkin_create_pkg ssr_pkg roscpp rospy std_msgs\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#💖第一个参数为软件包的名字，后面三个为软件包的依赖项")]),a._v("\n")])])]),s("h2",{attrs:{id:"_4-构建一个catkin工作区并生效配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-构建一个catkin工作区并生效配置文件"}},[a._v("#")]),a._v(" 4.构建一个catkin工作区并生效配置文件")]),a._v(" "),s("p",[a._v("现在你需要在catkin工作区中构建软件包：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" ~/catkin_ws\n catkin_make"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#😎注意编译的时候需要在工作目录下进行，也就是该目录下需要有build，devel，src目录")]),a._v("\n")])])]),s("p",[a._v("工作空间构建完成后，在"),s("code",[a._v("devel")]),a._v("子目录下创建了一个与你通常在"),s("code",[a._v("/opt/ros/$ROSDISTRO_NAME")]),a._v("下看到的目录结构类似的结构。")]),a._v(" "),s("p",[a._v("要将这个工作空间添加到ROS环境中，你需要"),s("code",[a._v("source")]),a._v("一下生成的配置文件：")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" ~/catkin_ws/devel/setup.bash\n")])])]),s("h2",{attrs:{id:"_5-软件包依赖关系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-软件包依赖关系"}},[a._v("#")]),a._v(" 5.软件包依赖关系")]),a._v(" "),s("h3",{attrs:{id:"_5-1-一级依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-一级依赖"}},[a._v("#")]),a._v(" 5.1 一级依赖")]),a._v(" "),s("p",[a._v("之前在使用"),s("a",{attrs:{href:"https://wiki.ros.org/catkin/commands/catkin_create_pkg",target:"_blank",rel:"noopener noreferrer"}},[a._v("catkin_create_pkg"),s("OutboundLink")],1),a._v("命令时提供了几个软件包作为依赖关系，现在我们可以使用"),s("code",[a._v("rospack")]),a._v("命令工具来查看这些"),s("strong",[a._v("一级")]),a._v("依赖包。")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("rospack depends1 beginner_tutorials\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("std_msgs\nrospy\nroscpp\n")])])]),s("h3",{attrs:{id:"_5-2间接依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2间接依赖"}},[a._v("#")]),a._v(" 5.2间接依赖")]),a._v(" "),s("p",[a._v("在很多情况下，一个依赖包还会有它自己的依赖关系，比如，"),s("code",[a._v("rospy")]),a._v("就有其它依赖包。")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("rospack depends1 rospy\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("genpy\nroscpp\nrosgraph\nrosgraph_msgs\nroslib\nstd_msgs\n")])])]),s("p",[a._v("一个软件包可以有相当多间接的依赖关系，好在使用"),s("code",[a._v("rospack")]),a._v("可以递归检测出所有嵌套的依赖包。")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("$ rospack depends beginner_tutorials\ncpp_common\nrostime\nroscpp_traits\nroscpp_serialization\ncatkin\ngenmsg\ngenpy\nmessage_runtime\ngencpp\ngeneus\ngennodejs\ngenlisp\nmessage_generation\nrosbuild\nrosconsole\nstd_msgs\nrosgraph_msgs\nxmlrpcpp\nroscpp\nrosgraph\nros_environment\nrospack\nroslib\nrospy\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);